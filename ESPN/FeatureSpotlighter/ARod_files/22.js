/*!
jQuery Waypoints - v1.0.2
Copyright (c) 2011 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/MIT-license.txt
https://github.com/imakewebthings/jquery-waypoints/blob/master/GPL-license.txt
*/
(function($,wp,wps,window,undefined){var $w=$(window),waypoints=[],oldScroll=-99999,didScroll=false,didResize=false,eventName="waypoint.reached",methods={init:function(f,options){this.each(function(){var $this=$(this),ndx=waypointIndex($this),base=ndx<0?$.fn[wp].defaults:waypoints[ndx].options,opts=$.extend({},base,options);opts.offset=opts.offset==="bottom-in-view"?function(){return $[wps]("viewportHeight")-$(this).outerHeight();}:opts.offset;if(ndx<0){waypoints.push({element:$this,offset:$this.offset().top,options:opts});}else{waypoints[ndx].options=opts;}f&&$this.bind(eventName,f);});$[wps]("refresh");return this;},remove:function(){return this.each(function(){var ndx=waypointIndex($(this));if(ndx>=0){waypoints.splice(ndx,1);}});},destroy:function(){return this.unbind(eventName)[wp]("remove");}};function waypointIndex(el){var i=waypoints.length-1;while(i>=0&&waypoints[i].element[0]!==el[0]){i-=1;}return i;}function triggerWaypoint(way,dir){way.element.trigger(eventName,dir);if(way.options.triggerOnce){way.element[wp]("destroy");}}function doScroll(){var newScroll=$w.scrollTop(),isDown=newScroll>oldScroll,pointsHit=$.grep(waypoints,function(el,i){return isDown?(el.offset>oldScroll&&el.offset<=newScroll):(el.offset<=oldScroll&&el.offset>newScroll);});if(!oldScroll||!newScroll){$[wps]("refresh");}oldScroll=newScroll;if(!pointsHit.length){return;}if($[wps].settings.continuous){$.each(isDown?pointsHit:pointsHit.reverse(),function(i,point){triggerWaypoint(point,[isDown?"down":"up"]);});}else{triggerWaypoint(pointsHit[isDown?pointsHit.length-1:0],[isDown?"down":"up"]);}}$.fn[wp]=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{if(typeof method==="function"||!method){return methods.init.apply(this,arguments);}else{if(typeof method==="object"){return methods.init.apply(this,[null,method]);}else{$.error("Method "+method+" does not exist on jQuery"+wp);}}}};$.fn[wp].defaults={offset:0,triggerOnce:false};var jQMethods={refresh:function(){$.each(waypoints,function(i,o){if(typeof(o)!=="undefined"){var adjustment=0,oldOffset=o.offset;if(typeof o.options.offset==="function"){adjustment=o.options.offset.apply(o.element);}else{if(typeof o.options.offset==="string"){var amount=parseFloat(o.options.offset),adjustment=o.options.offset.indexOf("%")?Math.ceil($[wps]("viewportHeight")*(amount/100)):amount;}else{adjustment=o.options.offset;}}o.offset=o.element.offset().top-adjustment;if(oldScroll>oldOffset&&oldScroll<=o.offset){triggerWaypoint(o,["up"]);}else{if(oldScroll<oldOffset&&oldScroll>=o.offset){triggerWaypoint(o,["down"]);}}}});waypoints.sort(function(a,b){return a.offset-b.offset;});},viewportHeight:function(){return(window.innerHeight?window.innerHeight:$w.height());},aggregate:function(){var points=$();$.each(waypoints,function(i,e){points=points.add(e.element);});return points;}};$[wps]=function(method){if(jQMethods[method]){return jQMethods[method].apply(this);}else{return jQMethods.aggregate();}};$[wps].settings={continuous:true,resizeThrottle:200,scrollThrottle:100};$w.scroll(function(){if(!didScroll){didScroll=true;window.setTimeout(function(){doScroll();didScroll=false;},$[wps].settings.scrollThrottle);}}).resize(function(){if(!didResize){didResize=true;window.setTimeout(function(){$[wps]("refresh");didResize=false;},$[wps].settings.resizeThrottle);}}).load(function(){$[wps]("refresh");doScroll();});})(jQuery,"waypoint","waypoints",this);window.innerShiv=(function(){var d,r;return function(h,u){if(!d){d=document.createElement("div");r=document.createDocumentFragment();
/*@cc_on d.style.display = 'none';@*/
}var e=d.cloneNode(true);
/*@cc_on document.body.appendChild(e);@*/
e.innerHTML=h.replace(/^\s\s*/,"").replace(/\s\s*$/,"");
/*@cc_on document.body.removeChild(e);@*/
if(u===false){return e.childNodes;}var f=r.cloneNode(true),i=e.childNodes.length;while(i--){f.appendChild(e.firstChild);}return f;};}());(function($){$.widget("espn.poll",{options:{pollId:0,active:false,voted:0,popUpMap:true,isMobile:/iP(od|ad|hone)|Android|webOS|BlackBerry/i.test(navigator.userAgent)},_create:function(){var self=this;this.answerInputs=this.element.find("input[name=vote_0]");this.submitButton=this.element.find(".submit-poll");this.question=this.element.find(".question");this.postVoteMessage=this.element.find(".post-vote-message");this.mapButton=this.element.find(".view-map");this.totalVotes=this.element.find(".total-votes");this.form=this.element.find("form");this.options.pollId=this.form.find("input[name=id]").val();this._checkHasVoted();if(this.options.voted===1){this.showResults();}else{if(this.answerInputs.filter(":checked").length>0){this._activate();}else{this.answerInputs.change(function(){self._activate();});}}if(this.mapButton.length>0){this.mapButton.bind("click",function(e){e.preventDefault();self.showMap();});}this.form.bind("submit",function(e){e.preventDefault();self._submit(e);});this.submitButton.bind("click",function(e){e.preventDefault();self._submit(e);});},_submit:function(event){if(this.options.active){this._checkHasVoted();var deCookie=espn.cookie.get("DE2")||"null",formVars=this.form.serialize(),goPollAction="http://poll.espn.go.com/cgi/sz/poll.dll?"+formVars,regPollAction="http://proxy.espn.go.com/espn/fp/pollRegDataInsert?voted="+this.options.voted+"&DE2="+deCookie+"&"+formVars,$checked=this.answerInputs.filter(":checked");this._submitForm("poll-"+this.options.pollId+"-gopoll",goPollAction);this.showResults();if(this.mapButton.length>0){this._submitForm("poll-"+this.options.pollId+"-regpoll",regPollAction);if(this.options.popUpMap===true){this.showMap();}}this.element.trigger("pollsubmit",{pollId:this.options.pollId,question:this.question.text(),answerId:$checked.val(),answerText:$checked.parent().text().trim()});}},_activate:function(){this.options.active=true;var activeUrl=this.submitButton.attr("data-active-src");this.submitButton.addClass("active-submit-poll");if(typeof(activeUrl)!=="undefined"&&activeUrl!==null){this.submitButton.attr("src",activeUrl);}},_submitForm:function(guid,action){var postFrame,eventFrame,process;postFrame=$('<iframe style="display:none;">').appendTo("body");eventFrame=$('<iframe name="'+guid+'" id="'+guid+'" style="display:none;">').appendTo("body");eventFrame.bind("load",function(e){e.preventDefault();eventFrame.remove();postFrame.remove();}).bind("error",function(e){e.preventDefault();eventFrame.remove();postFrame.remove();});process=postFrame.get(0).contentWindow.document;process.open();process.write('<form method="POST" action="'+action+'" target="'+guid+'"></form>');process.write("<script>window.onload=function (){document.forms[0].submit(); return false;}<\/script>");process.close();},_checkHasVoted:function(){var pollBit=this.options.pollId%256%64%4,bitArray=[8,1,2,4],cookieId=(this.options.pollId-(this.options.pollId%256))/256,cookieName="POLL"+cookieId.toString(),pollCookie=espn.cookie.get(cookieName);if(pollCookie!==null){var cookiePosition=pollCookie.length-Math.ceil((this.options.pollId%256)/4),cookieValue=pollCookie.substring(cookiePosition,cookiePosition+1),cookieAsHex="0x"+cookieValue.toString(1);if((bitArray[pollBit]&cookieAsHex)==bitArray[pollBit]){this.options.voted=1;}}},showMap:function(){var href=this.mapButton.attr("href");if(!this.options.isMobile){window.open(href,"MapPollWin","toolbar=no,status=no,scrollbars=no,location=no,menubar=no,directories=no,resizable=no,width=924,height=608");}},showResults:function(){this.element.find(".answers li").each(function(){var $answer=$(this),$answerBar=$answer.find(".answer-bar"),$answerPct=$answer.find(".answer-pct"),$answerInput=$answer.find("input"),stage=$answer.width()-50,width=(parseInt($answerPct.html(),10)*0.01)*stage;$answer.addClass("answer-results");if($answerBar.length>0){$answerBar.width(0).show();$answerPct.html("0%").show();$answerInput.hide();$answerBar.animate({width:"+"+width+"px"},{step:function(now,fx){$answerPct.html(Math.round((parseInt(now,10)/stage)*100)+"%");},duration:2000});}else{$answer.hide();}});this.submitButton.hide();if(this.postVoteMessage.length>0){this.question.hide();this.postVoteMessage.show();}if(this.options.isMobile){this.mapButton.hide();}this.totalVotes.show();this.element.trigger("pollshowresults",{pollId:this.options.pollId});}});})(jQuery);(function($){$.fn.sharetools=function(url){var $recommendLinks=this.find(".facebook-recommend a"),$tweetLinks=this.find(".twitter-tweet a"),$commentLinks=$(".echo-comments a"),$emailLinks=this.find(".espn-email a"),$followLinks=$(".twitter-follow a"),$recommendCounts=this.find(".facebook-recommend .count"),$tweetCounts=this.find(".twitter-tweet .count"),$commentCounts=this.find(".echo-comments .count"),$fbCommentCounts=this.find(".fb-comments .count"),$pageActionsTop=$("#page-actions-top"),$pageActionsBottom=$("#page-actions-bottom"),$window=$(window),recommendCountNum,tweetCountNum,commentCountNum,sluglessUrl,count;function fixCounts(countString){countString=countString+"";countString=countString.replace("+","");count=parseInt(countString,10);if(count>999){count=Math.floor(count/1000);count=count+"K";}if(count==="5K"){count="5K+";}return count;}if($recommendCounts.length>0||$fbCommentCounts.length>0){$.ajax({type:"GET",dataType:"jsonp",url:"http://graph.facebook.com/?ids="+escape(url),cache:true,success:function(data){if($recommendCounts.length>0){recommendCountNum=data[url].shares;likeCountNum=data[url].likes;if(typeof(recommendCountNum)!=="undefined"){recommendCountNum=fixCounts(recommendCountNum);$recommendCounts.each(function(i,v){$(this).html(recommendCountNum);});}else{if(typeof(likeCountNum)!=="undefined"){likeCountNum=fixCounts(likeCountNum);$recommendCounts.each(function(i,v){$(this).html(likeCountNum);});}}}if($fbCommentCounts.length>0){commentCountNum=data[url].comments;if(typeof(commentCountNum)!=="undefined"){commentCountNum=fixCounts(commentCountNum);$fbCommentCounts.each(function(i,v){$(this).html(commentCountNum);});}}}});}if($tweetCounts.length>0){$.ajax({type:"GET",dataType:"jsonp",url:"http://cdn.api.twitter.com/1/urls/count.json?url="+escape(url),cache:true,success:function(data){tweetCountNum=data.count;if(typeof(tweetCountNum)!=="undefined"){tweetCountNum=fixCounts(tweetCountNum);$tweetCounts.each(function(i,v){$(this).html(tweetCountNum);});}}});}if($commentCounts.length>0){sluglessUrl=url;var parameterStart=sluglessUrl.indexOf("/_/"),baseUrl,parameters,i;if(parameterStart>-1){baseUrl=sluglessUrl.substring(0,parameterStart);parameters=sluglessUrl.substring(parameterStart+3);parameters=parameters.split("/");for(i=0;i<parameters.length;i++){if(parameters[i]===""){parameters.splice(i,1);i++;}}if(parameters.length%2===1){parameters.splice(parameters.length-1,1);}parameters=parameters.join("/");sluglessUrl=baseUrl+"/_/"+parameters;}$.ajax({url:"http://api.echoenabled.com/v1/mux?appkey=dev.espn.go.com&requests=[{%22id%22:%22count1%22,%20%22method%22:%22count%22,%20%22q%22:%22childrenof:"+escape(sluglessUrl)+"%20source:espn.go.com,ESPN type:comment state:Untouched,ModeratorApproved -user.state:ModeratorBanned,ModeratorDeleted children source:espn.go.com,ESPN type:comment state:Untouched,ModeratorApproved -user.state:ModeratorBanned,ModeratorDeleted%22},]",dataType:"jsonp",success:function(data){commentCountNum=data.count1.count;if(data.count1.errorCode==="more_than"){commentCountNum=data.count1.errorMessage;}commentCountNum=fixCounts(commentCountNum);$commentCounts.each(function(i,v){$(this).html(commentCountNum);});}});}$recommendLinks.bind("click",function(e){e.preventDefault();var href=$(this).attr("href");if(espn.core.isMobile){href=href.replace("www.facebook.com","m.facebook.com");href=href+"&display=touch";window.location.href=href;}else{href=href+"&display=popup";window.open(href,"_blank","width=550,height=420,scrollbars=no,resizable=yes");}if(typeof(anTrackLink)!=="undefined"){anTrackLink(this,"espn","facebook","recommend");}});$tweetLinks.bind("click",function(e){var href=$(this).attr("href");window.open(href,"_blank","width=550,height=420,scrollbars=no,resizable=yes");if(typeof(anTrackLink)!=="undefined"){anTrackLink(this,"espn","twitter","tweet");}return false;});$followLinks.bind("click",function(e){e.preventDefault();var href=$(this).attr("href");window.open(href,"_blank","width=550,height=420,scrollbars=no,resizable=yes");});$commentLinks.bind("click",function(e){e.preventDefault();var href=$(this).attr("href");setTimeout(function(){window.location=href;},500);});$emailLinks.bind("click",function(e){e.preventDefault();var href=$(this).attr("href");window.open(href,"_blank","noresizable,noscrollbars,width=400,height=500");});function setPageActionStyles(defaultPosition,originalTop,hidePosition){var isFixed=($pageActionsTop.css("position")==="fixed");if(window.innerWidth>=1044){if($window.scrollTop()>hidePosition){$pageActionsTop.css({position:"absolute",top:originalTop});isFixed=false;}else{if($window.scrollTop()>defaultPosition&&!(isFixed)){$pageActionsTop.css({position:"fixed",top:0});isFixed=true;}else{if($window.scrollTop()<=defaultPosition&&isFixed){$pageActionsTop.css({position:"absolute",top:originalTop});isFixed=false;}}}}else{$pageActionsTop.css({position:"relative",top:0});isFixed=false;}}$("document").ready(function(){var $window=$(window),$pageActionsTop=$("#page-actions-top"),$authorBio=$(".mod-author-bio"),authorPosition=0,hasSeenAuthorBio=false,hidePosition=$(document).height();if($pageActionsTop.length>0){var defaultPosition=$pageActionsTop.offset().top,originalTop=$pageActionsTop.css("top");}if($pageActionsBottom.length>0){hidePosition=$pageActionsBottom.offset().top-($window.height()*0.5);}if($authorBio.length>0){authorPosition=$authorBio.offset().top-($window.height()*0.5);}$window.scroll(function(){if($pageActionsTop.length>0){setPageActionStyles(defaultPosition,originalTop,hidePosition);}});$window.resize(function(){if($pageActionsTop.length>0){setPageActionStyles(defaultPosition,originalTop,hidePosition);}});});return $(this);};"espn.core.init".namespace();espn.core.init.tools=function(id,url){jQuery(".mod-page-actions-"+id).sharetools(url);};})(jQuery);(function($){function loadPoll($poll){if($poll.length>0){$poll.poll({});}}function canPlayAudio(){var elem=document.createElement("audio"),bool=false;try{if(bool=!!elem.canPlayType){bool=new Boolean(bool);bool.ogg=elem.canPlayType('audio/ogg; codecs="vorbis"');bool.mp3=elem.canPlayType("audio/mpeg;");bool.wav=elem.canPlayType('audio/wav; codecs="1"');bool.m4a=elem.canPlayType("audio/x-m4a;")||elem.canPlayType("audio/aac;");}}catch(e){}return bool;}function loadPodcast(podcastElementId,podcastUrl){if(swfobject.hasFlashPlayerVersion("8.0.00")){var flashvars={soundLink:podcastUrl};var params={wmode:"transparent",scale:"noorder",allowscriptaccess:"Always",allownetworking:"All",align:"left",salign:"lt"};var attributes={};swfobject.embedSWF("http://a.espncdn.com/swf/espnradio/09/audio_player_circular_v2.swf",podcastElementId,"86","70","8.0.0","",flashvars,params,attributes);}else{var $podcast=$("#"+podcastElementId);if(canPlayAudio()){$podcast.show().click(function(e){e.preventDefault();$podcast.replaceWith('<audio src = "'+podcastUrl+'" controls style="width: 250px;"></audio>');});}else{$podcast.show();}}}function loadVideoIframe(videoElementId,videoId){var $video=$("#"+videoElementId),iframeUrl="http://espn.go.com/videohub/video/iframe?id="+videoId+"&player=blogs09&height=324&width=576&hidePlaylist=true&autostart=false";if((swfobject.hasFlashPlayerVersion("8.0.00")&&!espn.core.isMobile)||espn.core.ipad){if(typeof(s_omni)!=="undefined"&&typeof(s_omni.pageName)!=="undefined"){iframeUrl=iframeUrl+"&omniPageName="+s_omni.pageName;}$video.replaceWith('<iframe scrolling="no" marginheight="0" marginwidth="0" frameborder="0" width="575" height="324"  style="background:#000000; margin-top: 5px; margin-bottom:5px;" src="'+iframeUrl+'"></iframe>');}}function loadMedia($element){var $videos=$element.find(".embed-video"),$podcasts=$element.find(".embed-podcast"),$polls=$element.find(".mod-poll .poll"),$others=$element.find(".embed-other");if($videos.length>0){$videos.each(function(){var $thisVideo=$(this),videoElementId=$thisVideo.attr("id"),videoId=parseInt(videoElementId.replace("video-",""),10);loadVideoIframe(videoElementId,videoId);});}if($podcasts.length>0){$podcasts.each(function(){var $thisPodcast=$(this),podcastElementId=$thisPodcast.attr("id"),podcastUrl=$thisPodcast.attr("href");loadPodcast(podcastElementId,podcastUrl);});}if($polls.length>0){$polls.each(function(){var $thisPoll=$(this);loadPoll($thisPoll);});}if($others.length>0){$others.each(function(){var $thisOther=$(this),otherHtml=$thisOther.html();$thisOther.replaceWith(otherHtml);});}}function bindBlogPosts($blogPosts){if($blogPosts===null){$blogPosts=$(".blog-post");}$blogPosts.waypoint(function(event,direction){var $this=$(this),$blogPosts=$(".blog-post");if(!$this.hasClass("reached")){$this.addClass("reached");loadMedia($this);var url=$this.attr("data-url"),id=$this.attr("data-id");$this.find(".mod-page-actions").sharetools(url);}},{triggerOnce:true,offset:"100%"});}$(document).ready(function(){var $blogPosts=$(".mod-blog-post");if($blogPosts.length>1){bindBlogPosts($blogPosts);}else{loadMedia($("#content"));var url=$(".mod-blog-post").attr("data-url"),id=$(".mod-blog-post").attr("data-id");$(".mod-page-actions").sharetools(url);}});})(jQuery);