/*!
 * Infomous Cloud JS
 * http://www.infomous.com/
 *
 * @constructor
 * @param {Object} config
 */
(function(b){var d=function(aa,W,F){b.events(this);var u=b.base_root(),J=b.base_path(),M=b.$,o=this;var A=undefined,B=null,x=null,O=null,I=null;var ag,P,T,ae,H;var L,q;var ab,K;var N={loadAtStart:true,fontScale:1,zoom:1,maxWords:40,groups:true,setHideControlBar:true,setLinksTarget:"_blank",setInteractionMode:"hover_click",skin:"blue",colHoverBorder:"0x999999",skinSourcesOpacity:0.9,skinSourcesMargin:10,colAdsBackground:"0xDDDDDD",colAdsBorder:"0xCCCCCC",colAdsSponsored:"0x666666",brandShowLogo:true,brandLogoDestination:u,brandLogoSource:J+"img/infomous_icon_24x24.png",brandLogoText:"Powered by Infomous",trackOmniture:false,trackGoogle:true,trackGAAccount:"UA-18489566-1",trackHovers:true};for(var af in N){if(W[af]===undefined){W[af]=N[af]}}b.esc(W);this.id=function(){return aa};this.dispose=function(){};this.get_var=function(ah){return W[ah]};this.set_var=function(ah,ai){W[ah]=ai};this.set_vars=function(ai){for(var ah in ai){W[ah]=ai[ah]}};this.plug_toolbar=function(ah){if(x!==null){x.plug(ah)}};this.kill_current_request=function(){Y.remove();I.abort()};this.make_request=function(){o.kill_current_request();R.append(Y);var al=J+"proxy.php?positions=json&callback=?";al+="&url="+encodeURIComponent(W.feeds);var am=["type","width","height","maxWords","linkageThreshold","popularWordCutoff","textOption","maxResults","minChars","dict","focused","hidden","blocked","ngrams","hiddenSource","ngramsSource","fromDaysBack","toDaysBack","campaign","zoom","fontScale","groups","agg","since","until","sinceLast","untilLast","fromDaysBack","toDaysBack"];function ak(an){return b.contains(am,an)&&!b.is_empty(W[an])}for(var ai in W){if(ak(ai)){al+="&"+ai+"="+encodeURIComponent(W[ai])}if(ai.indexOf("query:")==0){al+="&"+ai.substring(6)+"="+encodeURIComponent(W[ai])}}var aj=I.add();var ah="proxy_cb_"+aa+"_"+aj;A=M.ajax({url:al,dataType:"json",success:function(ao,ap,an){if(!I.aborted(aj)){o.render(ao)}I.remove(aj)},jsonpCallback:ah})};this.render=function(aj){R.empty();ab=null;K=null;if(aj===undefined){return}var ak=aj.network;if(b.is_empty(ak.words)){o.add_cloud_feedback("No results found");return}ag=ak.words.word;P=ak.links.link;T=ak.sources.source;H=ak.requests.rssInputRequest;ae=ak.ads!==undefined?ak.ads.ad:undefined;L={};q={};var ai=ag.length,ah=[];while(ai--){ah[ai]=i(ai)}ai=ag.length;while(ai--){ah[ai].add_menu(false);ah[ai].remove_menu()}R.unbind("click");R.click(function(){if(ab){ab.remove_menu();K=null}else{o.dispatch("unfocus_all")}});ac();r()};this.remove_cloud_feedback=function(){R.find(".cloud-feedback").remove()};this.add_cloud_feedback=function(aj){o.remove_cloud_feedback();var ai=parseInt(R.css("z-index"))+1;var ah=M("<div/>",{"class":"cloud-feedback ctrls-dialog",style:"width:"+(R.width()-2)+"px;z-index: "+ai});ah.append("<p>"+aj+"</p>");R.empty();R.append(ah)};this.track_event=function(aj){if(b.bool(W.trackGoogle)){B.track_event(aj)}if(b.bool(W.trackOmniture)){var ah=document.URL;var al="infomous/"+action+"/"+label;var ak=ah+"/"+al;if(al.indexOf("?")==-1){al+="?p1=infomous"}else{al+="&p1=infomous"}var ai={href:ak};if(typeof s!=="undefined"){s.tl(ai,"o",al)}}};var l=M("#"+aa),R=M('<div class="infomous-cloud"/>'),Y;l.append(R);j(W);Y=M("<img/>",{src:J+"img/preloader.gif"});Y.css({position:"absolute",top:Math.round(W.height/2-32)+"px",left:Math.round(W.width/2-32)+"px","z-index":"1001"});I=new c();O=new a(W.width,W.height);w(function(ah){p(ah);v(W);X(W);D();o.track_event({action:"jload",label:W.setInterfaceType});G(function(){if(U(W.loadAtStart)){o.make_request()}F("js")})});function w(ai){var ah=J+"config.txt";if(W.nid!==undefined){ah=u+"cloud/config/"+W.nid+"/"+W.setInterfaceType}if(W.setConfigURL!==undefined){ah=J+W.setConfigURL}M.ajax({url:J+"jsonizer.php?url="+encodeURIComponent(ah)+"&callback=?",dataType:"json",jsonpCallback:"configCallback",success:function(aj){ai(aj.config)}})}function p(ah){var al=ai(decodeURIComponent(ah));var ak={},aj;if(W.preview!==undefined&&U(W.preview)&&u.indexOf("infomous.com")!=-1){for(aj in al){ak[aj]=al[aj]}for(aj in W){ak[aj]=W[aj]}}else{for(aj in W){ak[aj]=W[aj]}for(aj in al){ak[aj]=al[aj]}}for(aj in ak){W[aj]=ak[aj]}function ai(aq){var ap={};var ao=aq.split("\n");for(var an in ao){var am=ao[an];if(am.length<3||am.indexOf("//")==0||am.indexOf("#")==0){continue}var at=am.indexOf("=");if(at==-1){continue}var ar=e(am.substring(0,at));var au=e(am.substring(at+1));if(ar.length>0&&au.length>0){ap[ar]=au}}return ap}}function j(ah){l.css({width:b.css.size(ah.width),height:b.css.size(ah.height),position:"relative"});ah.width=l.width();ah.height=l.height();l.css({width:ah.width,height:ah.height});R.css({width:ah.width,height:ah.height});if(!b.css.is_abs_size(ah)){M(".infomous-container").css({width:"100%",height:"100%"})}}function v(aj){var ak={blue:{colBackground:"0xFFFFFF",colWord:"0x062D40",colWordHover:"0xFFFFFF",colWordFade:"0x8EAFBF",colWordHighlighted:"0xFF0000",colWordHoverLinked:"0x00405E",colHoverBox:"0x00405E",colFocusBox:"0xFFFFFF",colFocusBorder:"0xFF0000",colLink:"0xCCCCCC",colLinkHover:"0x75C4EB",colBlob:"0xF5F8FA",colBlobBorder:"0x8EAFBF",colBlobHover:"0xC1DCE8",colSourcesFill:"0xFFFFFF",colSourcesBorder:"0x00405E",colSourcesLine1:"0x006299",colSourcesLine2:"0x666666",colSourcesTextHover:"0x0000CC",skinLine1Size:"11px",skinLine2Size:"10px",colAdsLine1:"0x006299",adsPosition:"bottom",skinScrollWidth:12,skinSourcesShadow:0,skinSourcesWidth:240}};var ai=ak[aj.skin]||ak.blue;for(var ah in ai){if(aj[ah]===undefined){aj[ah]=ai[ah]}}}function X(ak){var ai="#"+aa+" {background-color:"+S(ak.colBackground)+";}\n";ai+=".infomous .infomous-cloud .body {color: "+S(ak.colWord)+";}\n";ai+=".infomous .infomous-cloud .fade {color: "+S(ak.colWordFade)+";}\n";ai+=".infomous .infomous-cloud .focused {background-color: "+S(ak.colFocusBox)+";border-color: "+S(ak.colFocusBorder)+";}\n";ai+=".infomous .infomous-cloud .highlighted {color:"+S(ak.colWordHighlighted)+";}\n";var ah=".infomous .infomous-cloud .sources .menu-sources-list .menu-source-item .line1";var am=".infomous .infomous-cloud .sources .menu-sources-list .menu-source-item .line2";var aj=".infomous .infomous-cloud .sources .menu-ad .menu-ad-txt .line1";var al=b.hex2rgb(ak.colSourcesFill);al.a=ak.skinSourcesOpacity;ai+=".infomous .infomous-cloud .sources { background-color:rgba("+al.r+","+al.g+","+al.b+","+al.a+");border-color: "+S(ak.colSourcesBorder)+";}\n";ai+=ah+", "+ah+" * { color: "+S(ak.colSourcesLine1)+";font-size:"+parseInt(ak.skinLine1Size)+"px;}\n";ai+=ah+":hover { color: "+S(ak.colSourcesTextHover)+";}\n";ai+=am+", "+am+" * { color: "+S(ak.colSourcesLine2)+";font-size: "+parseInt(ak.skinLine2Size)+"px;}\n";ai+=".infomous .infomous-cloud .sources .menu-ad { background-color:"+S(ak.colAdsBackground)+";border-color:"+S(ak.colAdsBorder)+";}\n";ai+=aj+", "+aj+" * { color: "+S(ak.colAdsLine1)+";}\n";ai+=".infomous .infomous-cloud .sources .menu-footer { background-color: "+S(ak.colSourcesBorder)+";border-color: "+S(ak.colSourcesBorder)+";}\n";ai+=".infomous .infomous-cloud .sources .menu-header { background-color: "+S(ak.colSourcesBorder)+";border-color: "+S(ak.colSourcesBorder)+";}\n";M("\n<style type=text/css>\n"+ai+"</style>\n").appendTo("head")}function G(ai){if(W.setInterfaceType!=="viewer"){if(typeof ai==="function"){ai()}return}b.require("CloudToolbar",function(){x=new b.CloudToolbar({id:"toolbar_"+o.id(),width:W.width,controls:W.setControls});x.add_to_dom(l);var aj=x.$el().height()+4;var ak=W.skinSourcesMargin;W.skinSourcesMargin=ak>aj?ak:aj;ah(x);if(typeof ai==="function"){ai()}});function ah(at){if(!b.bool(W.setHideControlBar)){return}var ap=R.height()-at.$el().height(),au,aj,al,ar=500,ak=300,ao=false,aq=null;R.unbind("mousemove");at.$el().unbind("mousemove");R.mousemove(an);at.$el().mousemove(an);R.mousemove(function(){al=true});at.$el().mousemove(function(){al=false});function an(ax){au=R.offset().top;aj=ax.pageY-au>ap;if(!aj&&!ao&&al){ao=true;av();aq=setTimeout(function(){av();aw()},ar)}else{if(aj&&ao){ao=false;if(av()){return}am()}else{if(!al){ao=false;av()}}}}function am(){at.$el().show("slide",{direction:"down"},ak)}function aw(){at.close_all_menues();at.$el().hide("slide",{direction:"down"},ak)}function av(){if(aq==null){return false}clearTimeout(aq);aq=null;return true}}}function C(ah){if(typeof W.focused!=="string"){return false}return b.contains(W.focused.split(","),ah)}function n(ah){if(typeof W.highlighted!=="string"){return false}return b.contains(W.highlighted.split(","),ah)}function E(ah){if(!b.bool(W.trackHovers)){return}o.track_event({action:"jmouseover",label:ah})}function V(ah){o.dispatch(["hide","unfocus"],{word:ah});o.track_event({action:"jhide",label:ah})}function g(ah){o.dispatch("focus",{word:ah});o.track_event({action:"jfocus",label:ah})}function Z(ah){o.dispatch("unfocus",{word:ah})}function k(ah,ai){o.track_event({action:"jsource_follow",label:ah,link_url:{name:"url",value:ai}})}function f(ah,ai){o.track_event({action:"jad_follow",label:ah,link_url:{name:"adurl",value:ai}})}function i(az){var ax,aA,ai,ar,ak,av,ah,aw,ao,ap=null;aA=ag[az];ar=ay(ae,aA.ads);ak=ay(T,aA.sources);aA.x=Math.round(aA.x);aA.y=Math.round(aA.y);if(!aA.hasOwnProperty("id")||!aA.hasOwnProperty("text")){return}q[aA.group]=q[aA.group]===undefined?[aA.id]:q[aA.group].concat(aA.id);av=M("<div/>",{"class":"body",id:"body_"+az});av.css({padding:"3px 10px","font-size":aA.size+"px","z-index":az+1});if(C(aA.text)){av.addClass("focused")}if(n(aA.text)){av.addClass("highlighted")}var an=e(aA.text),aC=parseInt(aA.br);if(aC>0){an=an.substring(0,aC)+"<br/>"+an.substring(aC+1)}an=an.replace(/\s/g,"&nbsp;");ah=M("<span/>",{html:an,"class":"word",id:"word_"+az});ah.mouseover(function(aE){E(aA.text)});aw=M("<div/>",{"class":"hide"});aw.css({margin:(Math.round(aA.size/2)-3)+"px 0 0 5px",display:"none"});aw.click(function(aF){M(this).parent().hide();var aE=M(this).siblings(".word").text();V(aE);aF.stopPropagation()});av.append(ah);av.append(aw);R.append(av);ai=L[aA.id]={x:aA.x,y:aA.y,w:av.width(),h:av.height(),ow:av.outerWidth(),oh:av.outerHeight()};av.css({left:(aA.x-ai.ow/2)+"px",top:(aA.y-ai.oh/2)+"px"});ax={add_menu:aq,remove_menu:at,get_ads:function(){return ar},get_srcs:function(){return ak}};ap=aB(W.setInteractionMode,ai);ao=z(ax,aA,ap);ap.init();return ax;function ay(aF,aG){if(b.is_empty(aG)){return[]}var aJ=[],aH=aG.split(","),aK,aE,aI=aH.length;while(aI--){aE=parseInt(aH[aI]);if(isNaN(aE)){continue}aK=aF[aE];if(aK===undefined){continue}aJ.push(aK)}return aJ}function aB(aH,aG){var aF={};var aE={x:W.skinSourcesMargin,y:W.skinSourcesMargin};aF.hover=aF.hover_click=(function(){var aI=null,aK=1000;function aJ(){if(aI===null){return}clearTimeout(aI);aI=null}return{init:function(){var aM=ao.header();var aL=aM.find(".m-header-arrow");ad(aL,90);av.unbind("click");av.click(function(aN){if(K!==null&&K!==av){if(ab!==null){ab.remove_menu()}}if(ab!==av){aJ();aq();K=av;ad(aL,0)}aN.stopPropagation()});av.remove_menu=at;av.unbind("mouseenter");av.mouseenter(function(aN){if(K===null){aJ();aI=setTimeout(aq,aK)}});av.unbind("mouseleave");av.mouseleave(function(aN){aJ()});ao.unbind("mouseleave");ao.mouseleave(function(aN){if(K===null){at()}});aM.unbind("click");aM.click(function(aN){if(K===null){K=av;ad(aL,0)}else{if(K===av){at();K=null;ad(aL,90)}}aN.stopPropagation()})},add_menu:function(){if(!!ab){ab.remove_menu()}this.init();R.append(ao);ao.show();var aM=this.get_menu_layout();ao.css({position:"absolute",left:aM.x,width:aM.w,top:aM.y});if(aM.h_dif>0){ao.height(aM.h);var aL=ao.ads().outerHeight(true)+10;ao.srcs().height(aM.h-aL)}},get_menu_layout:function(){var aQ=aG.x,aP=aG.y,aN=aG.oh,aR=W.width,aL=W.height,aX=ao.outerHeight(true),aM=ao.header().outerHeight(true),aY=ao.footer().outerHeight(true),aT=aX+aM+aY;return{x:aV(),y:aU(),w:aW(),h:aO(),h_dif:aS()};function aV(){var a0=aQ-aW()/2,a2=aR-aE.x,aZ=aE.x,a1=aQ+aW()/2,a3=aQ-aW()/2;if(a1>a2){return a0-(a1-a2)}else{if(a3<aZ){return aZ}else{return a0}}}function aW(){return W.skinSourcesWidth}function aU(){var a2=aT-aS();var aZ=aL-aE.y,a1=aE.y,a3=(aP+aN/2)+a2/2,a0=(aP-aN/2)-a2/2;if(a3>aZ){return aZ-(a2-aM)}else{if(a0<a1){return a1+aM}else{return aP-aO()/2}}}function aO(){return aX-aS()}function aS(){var a0=aL-aE.y*2,aZ=aT-a0;return aZ>0?aZ:0}}}})();aF.click={init:function(){av.unbind("click");av.click(function(aI){if(ao.is_open()){g(aA.text)}else{aq()}aI.stopPropagation()});av.remove_menu=at;ao.unbind("mouseleave");ao.mouseleave(at)},add_menu:function(){if(!!ab){ab.remove_menu()}this.init();R.append(ao);ao.show();var aJ=this.get_menu_layout();ao.css({position:"absolute",left:aJ.x,top:aJ.y,width:aJ.w});if(aJ.h_dif>0){ao.height(aJ.h);var aI=ao.ads().outerHeight(true)+10;ao.srcs().height(aJ.h-aI)}aw.show()},get_menu_layout:function(){var aN=aG.x,aM=aG.y,aJ=aG.oh,aO=W.width,aI=W.height,aT=ao.outerHeight(true),aU=aM<aI/2,aK=aN<aO/2,aV=aP();return{x:aR(),y:aQ(),w:aS(),h:aL(),h_dif:aV};function aR(){var aX=aN,aZ=aO-aE.x,aW=aE.x,aY=aN+aS(),a0=aN;if(aY>aZ){return aX-(aY-aZ)}else{if(a0<aW){return aW}else{return aX}}}function aS(){return W.skinSourcesWidth}function aQ(){return aU?(aM+aJ/2):(aM-aJ/2)-aL()}function aL(){return aT-aV}function aP(){var aZ;if(aU){var aW=aI-aE.y,a0=(aM+aJ/2)+aT;aZ=a0-aW}else{var aY=aE.y,aX=(aM-aJ/2)-aT;aZ=aY-aX}return aZ>0?aZ:0}}};return aF[aH]}function aq(aF){ap.add_menu();ab=av;aD();if(aF!==false){o.track_event({action:"jsources_view",label:aA.text});var aH=ax.get_ads(),aE=aH.length;for(var aG=0;aG<aE;aG++){o.track_event({action:"jad_view",label:aA.text,link_url:{name:"adurl",value:aH[aG].url}})}}}function at(){aw.hide();aj();ao.detach();if(ab===av){ab=null}}function aD(){var aF=q[aA.group];var aG=S(W.colWordHover);var aE=S(W.colWordHoverLinked);al(aF,aE);am(ah,aG);h(aF,{blob:S(W.colBlobHover),border:S(W.colBlobBorder)});t(aF,P,S(W.colLinkHover))}function aj(){var aF=q[aA.group];var aE=S(W.colWord);al(aF,aE);am(ah,aE);h(aF,{blob:S(W.colBlob),border:S(W.colBlobBorder)});t(aF,P,S(W.colLink))}function al(aI,aG){if(aI===undefined){return}var aF,aE=aI.length;for(var aH=0;aH<aE;aH++){aF=au(aI[aH]);am(aF,aG)}}function am(aF,aE){aF.css("color",aE)}function au(aE){return M("#word_"+aE)}}function z(al,aj,ao){var ah=ar(),au=at(al.get_ads()),ak=aq(al.get_srcs()),an=av();var am={};am.hover=am.hover_click={bottom:[ah,ak,au,an],top:[ah,au,ak,an]};am.click={bottom:[ak,au],top:[au,ak]};var aw=M("<div/>",{"class":"sources",id:"sources_"+aj.id});var ai=am[W.setInteractionMode][W.adsPosition];for(var ap=0;ap<ai.length;ap++){aw.append(ai[ap])}aw.find(".menu-source-item a").click(function(){k(aj.text,M(this).attr("href"))});aw.find(".menu-ad a").click(function(){f(aj.text,M(this).attr("href"))});aw.is_open=function(){return aw.parent().length>0&&aw.css("display")!=="none"};aw.ads=function(){return au};aw.srcs=function(){return ak};aw.header=function(){return ah};aw.footer=function(){return an};return aw;function ar(){var az=M("<div/>",{"class":"menu-elem menu-header"});var ax=M("<span/>",{"class":"m-header-elem m-header-txt"});var ay=M("<img/>",{"class":"m-header-elem m-header-arrow",src:b.base_path()+"img/rightpointing_triangle_10x10_white.png"});ax.text(aj.text);az.append(ay);az.append(ax);az.css(aj.x<W.width/2?"left":"right","-1px");return az}function av(){var aA=C(aj.text)?"focused":"unfocused";var az=M("<div/>",{"class":"menu-elem menu-footer"});var aC={unfocused:{text:"DRILL DOWN",click:function(){g(aj.text)}},focused:{text:"GO BACK UP",click:function(){Z(aj.text)}}};var ay=M("<span/>",{"class":"m-footer-bt bt-focus"});var aB=M("<span/>",{"class":"m-footer-bt bt-hide"});var ax=M('<div class="rayita"></div>');ay.text(aC[aA].text);ay.unbind("click");ay.click(aC[aA].click);aB.text("HIDE WORD");aB.unbind("click");aB.click(function(){V(aj.text)});var aD=W.skinSourcesWidth*0.1;ay.css("left",aD+"px");aB.css("right",aD+"px");ax.css("left",(W.skinSourcesWidth/2)+"px");ax.css("color",S(W.colSourcesLine1));az.append(ay);az.append(ax);az.append(aB);return az}function at(aH){var aB="",aA=W.setLinksTarget,aG,aC=aH.length;var ay,aI,aF,aD,az,ax;while(aC--){aG=aH[aC];aB+='<div class="menu-elem menu-ad">';aF=!b.is_empty(aG.img);aD=!b.is_empty(aG.url);az=!b.is_empty(aG.line1);ax=!b.is_empty(aG.line2);if(aF){var aE=az||ax?'style="float:left"':"";aB+='<div class="menu-ad-img" '+aE+">"+(aD?'<a href="'+aG.url+'" target="'+W.setLinksTarget+'">':"")+'<img src="'+aG.img+'">'+(aD?"</a>":"")+"</div>"}if(!az&&!ax){aB+="</div>";continue}aB+='<div class="menu-ad-txt">';if(az){if(!/<a/.test(aG.line1)&&aD){ay='<a class="line1" href="'+aG.url+'" target="'+aA+'">'+aG.line1+"</a>"}else{ay='<span class="line1">'+aG.line1+"</span>"}aB+=ay}if(ax){aI='<span class="line2">'+aG.line2+"</span>";aB+=aI}aB+="</div>";aB+="</div>"}return M(aB)}function aq(aC){var aA=M("<div/>",{"class":"menu-elem menu-sources-list"});var az="",ax=W.setLinksTarget,aE,ay=aC.length;var aD,aB;while(ay--){aE=aC[ay];aD=/href/.test(aE.title)?'<span class="line1">'+aE.title+"</span>":'<a class="line1" href="'+aE.url+'" target="'+ax+'">'+aE.title+"</a>";aB='<span class="line2">'+aE.caption+"</span>";az+='<div class="menu-source-item">'+aD+aB+"</div>"}aA.append(az);return aA}}function ad(ah,ai){ah.css({"-webkit-transform":"rotate("+ai+"deg)","-moz-transform":"rotate("+ai+"deg)","-ms-transform":"rotate("+ai+"deg)","-o-transform":"rotate("+ai+"deg)",transform:"rotate("+ai+"deg)",zoom:1})}function ac(){O.clear();R.append(O.el());m(q,{blob:S(W.colBlob),border:S(W.colBlobBorder)});y(P,S(W.colLink))}function y(aj,ai){var ah=aj.length;for(var ak=0;ak<ah;ak++){Q(aj[ak],ai)}}function t(an,ao,ah){if(an===undefined||ao===undefined){return}var ak,ap,al=an.length,aj,am,ai=ao.length;for(ak=0;ak<al;ak++){ap=an[ak];for(aj=0;aj<ai;aj++){am=ao[aj];if(am===undefined||ap!==am.from){continue}Q(am,ah)}}}function Q(ai,ah){if(ai===undefined||ai.from===undefined){return}var ak=L[ai.from],aj=L[ai.to];O.line(ak.x,ak.y,aj.x,aj.y,ah)}function m(ah,ai){if(!U(W.groups)){return}for(var aj in ah){h(ah[aj],ai)}}function h(ao,aj){var ai=0.9,ah=2;var ak,aq,ap,am,al,an;for(ak in ao){aq=ao[ak];if(L[aq]===undefined){continue}ap=L[aq];an=Math.round(ap.w*ai);am=ap.x;al=ap.y;O.ellipse(am,al,an,an,aj.border)}for(ak in ao){aq=ao[ak];if(L[aq]===undefined){continue}ap=L[aq];an=Math.round(ap.w*ai)-ah;am=ap.x;al=ap.y;O.ellipse(am,al,an,an,aj.blob)}}function r(){var aj="infomous-logo";if(!U(W.brandShowLogo)||M("#"+aj).length>0){return}var ai=W.brandLogoDestination,ah=W.brandLogoSource,al=W.brandLogoText,ak=M("<a/>",{text:" ",href:ai,id:aj,target:"_blank",title:al,style:"background-image: url("+ah+");"});ak.click(function(){o.track_event({action:"jlogo_follow",label:"",link_url:{name:"url",value:ai}})});R.append(ak)}function D(){if(!b.bool(W.trackGoogle)){return}B=new b.GAtracker({name:"infomousTracker",account:W.trackGAAccount,nid:W.nid})}function S(ah){return escape(ah).replace("0x","#")}function e(ah){return ah.replace(/^["\'\s]+|["\'\s]+$/g,"")}function U(ah){return ah!=false&&ah!="false"&&ah!=0&&ah!="0"}};var c=function(){var e=[];function f(){var h,g=e.length;for(h=0;h<g;h++){if(e[h]==="free"||e[h]===undefined){return h}}return g}this.add=function(){var g=f();e[g]="pending";return g};this.remove=function(g){e[g]="free"};this.aborted=function(g){return e[g]==="aborted"};this.abort=function(){var h,g=e.length;for(h=0;h<g;h++){if(e[h]==="pending"){e[h]="aborted"}}};this.print=function(){var j="";var h,g=e.length;for(h=0;h<g;h++){j+=h+": "+e[h]+"\n\t"}return j?"\n\t{\n\t"+j+"}\n":"empty"}};var a=function(g,l){g=parseInt(g);l=parseInt(l);var j=document.createElement("canvas");j.width=g;j.height=l;var f=j.getContext("2d");var m={lineWidth:1,strokeStyle:"black",fillStyle:"red",lineCap:"butt",lineJoin:"round"};for(var i in m){f[i]=m[i]}this.el=function(){return j};this.clear=function(){f.clearRect(0,0,g,l)};this.line=function(n,q,k,o,h,p){f.beginPath();f.moveTo(n,q);f.lineTo(k,o);e("strokeStyle",h);e("lineWidth",p);f.stroke()};this.ellipse=function(k,t,n,p,o,r,q){f.save();f.beginPath();f.translate(k-n,t-p);f.scale(n,p);f.arc(1,1,1,0,2*Math.PI,false);f.restore();e("fillStyle",o);if(o){f.fill()}e("lineWidth",r);e("strokeStyle",q);if(r||q){f.stroke()}};function e(h,k){if(k&&f[h]!==k){f[h]=k}}};b.define("CloudJS",d)})(Infomous);